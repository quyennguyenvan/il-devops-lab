{
  "version": 4,
  "terraform_version": "1.0.4",
  "serial": 1139,
  "lineage": "7f67f57a-34e7-72ce-236a-f8697f70b57f",
  "outputs": {
    "rds_postgres_username": {
      "value": "zerotrustAdmin",
      "type": "string"
    }
  },
  "resources": [
    {
      "mode": "data",
      "type": "template_file",
      "name": "kms_template_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/template\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "c6edcb69f9158607c1cc19dc06e5d6d4a02c58b52a92156279435feb7ba2c9a3",
            "rendered": "{\r\n    \"Version\": \"2012-10-17\",\r\n    \"Statement\": [\r\n        {\r\n            \"Sid\": \"EnableIAMUserPermissions\",\r\n            \"Effect\": \"Allow\",\r\n            \"Action\": \"kms:*\",\r\n            \"Resource\": \"*\",\r\n            \"Condition\" : { \"StringEquals\" : { \"aws:username\" : \"root\" }}\r\n        },\r\n        {\r\n            \"Sid\": \"AllowaccessforKeyAdministrators\",\r\n            \"Effect\": \"Allow\",\r\n            \"Action\": [\r\n                \"kms:Create*\",\r\n                \"kms:Describe*\",\r\n                \"kms:Enable*\",\r\n                \"kms:List*\",\r\n                \"kms:Put*\",\r\n                \"kms:Update*\",\r\n                \"kms:Revoke*\",\r\n                \"kms:Disable*\",\r\n                \"kms:Get*\",\r\n                \"kms:Delete*\",\r\n                \"kms:TagResource\",\r\n                \"kms:UntagResource\",\r\n                \"kms:ScheduleKeyDeletion\",\r\n                \"kms:CancelKeyDeletion\"\r\n            ],\r\n            \"Resource\": \"*\",\r\n            \"Condition\" : { \"StringEquals\" : { \"aws:username\" : \"quyennvcom-admin\" }}\r\n        },\r\n        {\r\n            \"Sid\": \"Allowuseofthekey\",\r\n            \"Effect\": \"Allow\",\r\n            \"Action\": [\r\n                \"kms:Encrypt\",\r\n                \"kms:Decrypt\",\r\n                \"kms:ReEncrypt*\",\r\n                \"kms:DescribeKey\",\r\n                \"kms:GetPublicKey\"\r\n            ],\r\n            \"Resource\": \"*\",\r\n            \"Condition\" : { \"StringEquals\" : { \"aws:username\" : \"quyennvcom-admin\" }}\r\n        },\r\n        {\r\n            \"Sid\": \"Allowattachmentofpersistentresources\",\r\n            \"Effect\": \"Allow\",\r\n            \"Action\": [\r\n                \"kms:CreateGrant\",\r\n                \"kms:ListGrants\",\r\n                \"kms:RevokeGrant\"\r\n            ],\r\n            \"Resource\": \"*\",\r\n            \"Condition\": {\r\n                \"Bool\": {\r\n                    \"kms:GrantIsForAWSResource\": \"true\"\r\n                },\r\n                \"StringEquals\" : { \"aws:username\" : \"quyennvcom-admin\" }\r\n            }\r\n        }\r\n    ]\r\n}",
            "template": "{\r\n    \"Version\": \"2012-10-17\",\r\n    \"Statement\": [\r\n        {\r\n            \"Sid\": \"EnableIAMUserPermissions\",\r\n            \"Effect\": \"Allow\",\r\n            \"Action\": \"kms:*\",\r\n            \"Resource\": \"*\",\r\n            \"Condition\" : { \"StringEquals\" : { \"aws:username\" : \"root\" }}\r\n        },\r\n        {\r\n            \"Sid\": \"AllowaccessforKeyAdministrators\",\r\n            \"Effect\": \"Allow\",\r\n            \"Action\": [\r\n                \"kms:Create*\",\r\n                \"kms:Describe*\",\r\n                \"kms:Enable*\",\r\n                \"kms:List*\",\r\n                \"kms:Put*\",\r\n                \"kms:Update*\",\r\n                \"kms:Revoke*\",\r\n                \"kms:Disable*\",\r\n                \"kms:Get*\",\r\n                \"kms:Delete*\",\r\n                \"kms:TagResource\",\r\n                \"kms:UntagResource\",\r\n                \"kms:ScheduleKeyDeletion\",\r\n                \"kms:CancelKeyDeletion\"\r\n            ],\r\n            \"Resource\": \"*\",\r\n            \"Condition\" : { \"StringEquals\" : { \"aws:username\" : \"${username}\" }}\r\n        },\r\n        {\r\n            \"Sid\": \"Allowuseofthekey\",\r\n            \"Effect\": \"Allow\",\r\n            \"Action\": [\r\n                \"kms:Encrypt\",\r\n                \"kms:Decrypt\",\r\n                \"kms:ReEncrypt*\",\r\n                \"kms:DescribeKey\",\r\n                \"kms:GetPublicKey\"\r\n            ],\r\n            \"Resource\": \"*\",\r\n            \"Condition\" : { \"StringEquals\" : { \"aws:username\" : \"${username}\" }}\r\n        },\r\n        {\r\n            \"Sid\": \"Allowattachmentofpersistentresources\",\r\n            \"Effect\": \"Allow\",\r\n            \"Action\": [\r\n                \"kms:CreateGrant\",\r\n                \"kms:ListGrants\",\r\n                \"kms:RevokeGrant\"\r\n            ],\r\n            \"Resource\": \"*\",\r\n            \"Condition\": {\r\n                \"Bool\": {\r\n                    \"kms:GrantIsForAWSResource\": \"true\"\r\n                },\r\n                \"StringEquals\" : { \"aws:username\" : \"${username}\" }\r\n            }\r\n        }\r\n    ]\r\n}",
            "vars": {
              "username": "quyennvcom-admin"
            }
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_db_subnet_group",
      "name": "db_sng_rds",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": []
    },
    {
      "mode": "managed",
      "type": "aws_default_route_table",
      "name": "rtb_vpc_il_vpc_main_main",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": []
    },
    {
      "mode": "managed",
      "type": "aws_iam_policy",
      "name": "ksm_policy_grant",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": []
    },
    {
      "mode": "managed",
      "type": "aws_iam_policy",
      "name": "rds_enhance_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": []
    },
    {
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "iam_cks_kms_role",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": []
    },
    {
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "iam_monitoring_interval_rds",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": []
    },
    {
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "role_kms_attachment_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": []
    },
    {
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "role_rds_monitoring_attachment_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": []
    },
    {
      "mode": "managed",
      "type": "aws_internet_gateway",
      "name": "igw_il_vpc_main_main",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": []
    },
    {
      "mode": "managed",
      "type": "aws_kms_alias",
      "name": "kms_alias_name",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": []
    },
    {
      "mode": "managed",
      "type": "aws_kms_grant",
      "name": "kms_grant_permission",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": []
    },
    {
      "mode": "managed",
      "type": "aws_kms_key",
      "name": "kms_db_key",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": []
    },
    {
      "mode": "managed",
      "type": "aws_route_table_association",
      "name": "rtb_main_association_subnet",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": []
    },
    {
      "mode": "managed",
      "type": "aws_subnet",
      "name": "sn_app_db_zonea",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": []
    },
    {
      "mode": "managed",
      "type": "aws_subnet",
      "name": "sn_app_db_zonec",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": []
    },
    {
      "mode": "managed",
      "type": "aws_subnet",
      "name": "sn_app_ec_instance",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": []
    },
    {
      "mode": "managed",
      "type": "aws_vpc",
      "name": "il_vpc_main",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": []
    },
    {
      "mode": "managed",
      "type": "random_password",
      "name": "rd_pwd_postgre",
      "provider": "provider[\"registry.terraform.io/hashicorp/random\"]",
      "instances": []
    },
    {
      "module": "module.ecr_module[0]",
      "mode": "managed",
      "type": "aws_ecr_repository",
      "name": "ecr_il_py_app",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": []
    },
    {
      "module": "module.postgresql_db[0]",
      "mode": "managed",
      "type": "aws_db_instance",
      "name": "rds_postgre_db",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": []
    },
    {
      "module": "module.postgresql_db[0]",
      "mode": "managed",
      "type": "aws_db_parameter_group",
      "name": "dbpg_rds_postgres",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": []
    },
    {
      "module": "module.postgresql_db[0]",
      "mode": "managed",
      "type": "aws_security_group",
      "name": "sg_rds_postgres_instance",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": []
    },
    {
      "module": "module.s3_storage_static_web[0]",
      "mode": "managed",
      "type": "aws_s3_bucket",
      "name": "il_s3_static_web_test_job",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": []
    }
  ]
}
